<pre>
  OLYP: 0005
  Title: Definition of the Olympus Byzantine Fault Tolerant consensus system (THEMIS)
  Author: Enrique Berrueta &lt;eabz@kindynos.mx&gt;
  Comments-Summary: No comments yet.
  Status: Final
  Type: Standard
  Created: 18/Dic/2019
  License: MIT License
</pre>

## Table of Contents

* [Abstract](#abstract)
* [Motivations](#motivations)
* [Problems](#problems)
    * [Byzantine fault](#byzantine-fault)
    * [Double spending](#double-spending)
* [Implemented solutions and flaws](#implemented-solutions-and-flaws)
* [Defining "THEMIS"](#defining-themis)
    * [Definitions](#definitions)
    * [Worker list](#worker-list)
    * [Coin Agnostic](#coin-agnostic)
    * [Chain reorganizations](#chain-reorganizations)
    * [Considerations](#considerations)
* [Implementations](#implementations)
* [Copyright](#copyright)

## Abstract

The Bitcoin revolution has opened a new panorama into the development of digital currencies.

Though those solutions are very creative and solve actual problems needed for the society to give control to the people of their financial assets, there are still some flaws in those models and new solutions surge.

This new consensus mechanism aims to solve the significant issues overall cryptocurrencies to make sure the user experience and long-term scaling is not an issue. 
    
## Motivations

The development of this consensus model aims to solve two issues. 

1. The current Proof-of-work consensus mechanism is unsafe for any other coin than Bitcoin, and the Proof-of-Stake is either centralized or unnecessary computationally expensive and difficult to scale on long-term.
2. The development of alternative currencies is highly centralized.

This system pretends to create a new utxo based consensus mechanism that can coexist with multiple assets within the same chain and is computationally easy to solve and cryptographically secure.

## Problems

Any distributed system that aims to create a network to transact value assets must solve two main issues. Those issues are the "Byzantine Fault" and "The Double-Spending."

### Byzantine fault

The Byzantine fault is a collective term to refer a problem with systems (and particularly on distributed systems) on which a part of a system can cause catastrophic issues by providing wrong information among the peers or system parts. The term Byzantine was used due to the similarity of the problem that generals faced when trying to coordinate an attack using only messages. 

### Double spending

The double-spending issue refers to a problem in digital cash on which coins can be spent twice at the same time. 

## Implemented solutions and flaws

On the blockchain development, there are multiple solutions for this issue. Those solutions -consensus mechanism- look to achieve a consensus between all participants over the network. 

Some of the most common solutions for these issues are:
* Satoshi's Proof-of-Work
* PeerCoin Proof-of-Stake
* Bitshares Delegated Proof-of-Stake

While those mechanisms solve the byzantine fault and the double-spending problems, those models have other flaws that moved us to propose a new consensus model.

It is not the purpose of this text to explain the whole model of consensus mechanism used by those protocols, but we are just going to enumerate some flaws.

### Poof-of-Work: 

The "POW" model is the Bitcoin consensus mechanism.

While this model has proven to be secure for the Bitcoin blockchain, as we have already seen, another coin cannot achieve that level of security.

This consensus mechanism is based on competence between nodes to achieve the most significant work; this makes chain-reorganizations a necessity for the network. Chain-reorganizations are the principle of a 51% double-spending attack.

There are other variations of the POW mechanism, but those modifications only create centralization over the consensus mechanism model.

### Proof-of-Stake

The "POS" model is the PeerCoin consensus mechanism.

The Proof-of-Stake model has the same principles of the proof-of-work model about competition and difficulty achievement by the network, but instead of using work as a matter of difficulty calculator, it uses coins.

Since POS is based on POW, it inherits its flaws, chain-reorganizations and is also vulnerable to a 51% attack.

Another flaw in the POS consensus mechanism is the amount of information required to verify the validity of the coinstake.

### Delegated Proof-of-Stake

The "dPOS" model is the Bitshares consensus mechanism.

The delegate Proof-of-Stake model is a non-difficulty base mechanism where nodes are chosen among the network to produce the blocks without any difficulty assigned. This model can produce blocks every 10 seconds without any competition.

The main disadvantage of this model is centralization. Since nodes are selected using a voting mechanism, it doesn't allow any user to participate in the consensus mechanism.

## Defining "THEMIS"

```
THEMIS is an ancient Greek Titaness. She is described as "The Lady of good counsel," and is the personification of divine order, fairness, law, natural law, and custom.
```

The Olympus protocol consensus mechanism is called THEMIS. 

It is defined as a deterministic and organized list of workers that produce blocks without any computational problem at its turn and on time.

### Definitions

The base properties of the THEMIS consensus model are:

* Non-difficulty based: There is no requirement to solve any computational problem.
* Organized list: There is a list with organized peers to produce blocks at a particular time and fallback nodes to produce them if the primary node fails.
* Deterministic: Since the entire consensus depends on the consensus on the list, it should be deterministic and verifiable over time.

### Worker list

A worker list is a group of collateralized nodes that are defined on-chain to make sure they can guarantee the network the ability to generate blocks. 

To make the network decentralized, anybody can take part in the consensus algorithm. The only requirements to submit a worker into the worker list are: to prove the possession of a collateralized set of coins and keep it unspent and a static IP on which the network can reach the worker.

Once a new worker is created into the network, peers agree to put it at the bottom of the worker list. This way, each worker moves on the list until their turn is reached and goes to the bottom when it creates and broadcasts the block successfully.
    
The collateral required by the network is not at a fixed amount; anybody can collateralize any amount between 10 and 1000 coins.
    
To make sure users are willing to spend time and effort to make sure the workers are available for the network, the blockchain incentivizes them by giving them newly generated coins based on the proportionality of their collateral.

### Chain reorganizations

Since THEMIS is non-difficulty based, each worker creates the block at an organizational level, so, the principle of "the valid chain is the longest" is no more valid on this consensus mechanism, hence, no need for chain-reorganizations.

Remove chain-reorganizations give real advantages to the Olympus network since the immutability of the information is achieved at the first block and no need for further confirmations.

### Considerations

There is an important consideration about the launch of the any chain using the THEMIS mechanism that needs to take into account.
	
Since the algorithms rely entirely on the worker list and the workers need coins to be added into the list, then the launch of a network using THEMIS algorithm is completely centralized since there must be a hardcoded private key to create the first blocks until the network tokens are distributed.
	
But to solve centralization on the main network launch, the Olympus will take a snapshot on a particular block of the old Polis network and distribute those coins for the users to redeem them. That way, no rewards are generated before the entire network can take part in the consensus mechanism.

## Implementations

The current consensus mechanism has two main implementations. 
1. [Ogen (written in Go)](https://github.com/olympus-protocol/ogen)
2. [(work-in-progress) Rhea (written in Rust)](https://github.com/olympus-protocol/rhea)

   

## Copyright

Copyright (c) 2019 Grupo Kindynos.  [Licensed under MIT License](https://opensource.org/licenses/MIT)
